!function(a){a.easytabs=function(t,s){var e,i,n,l,c,o,d=this,r=a(t),h={animate:!0,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:!0,cycle:!1,collapsible:!1,collapsedClass:"collapsed",collapsedByDefault:!0,uiTabs:!1,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:!0,event:"click",panelContext:r},b={fast:200,normal:400,slow:600};d.init=function(){d.settings=o=a.extend({},h,s),o.bind_str=o.event+".easytabs",o.uiTabs&&(o.tabActiveClass="ui-tabs-selected",o.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all",o.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",o.tabClass="ui-state-default ui-corner-top",o.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"),o.collapsible&&void 0!==s.defaultTab&&void 0===s.collpasedByDefault&&(o.collapsedByDefault=!1),"string"==typeof o.animationSpeed&&(o.animationSpeed=b[o.animationSpeed]),a("a.anchor").remove().prependTo("body"),r.data("easytabs",{}),d.setTransitions(),d.getTabs(),u(),f(),g(),$(),T(),r.attr("data-easytabs",!0)},d.setTransitions=function(){n=o.animate?{show:o.transitionIn,hide:o.transitionOut,speed:o.animationSpeed,collapse:o.transitionCollapse,uncollapse:o.transitionUncollapse,halfSpeed:o.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}},d.getTabs=function(){var t;d.tabs=r.find(o.tabs),d.panels=a(),d.tabs.each(function(){var s=a(this),e=s.children("a"),i=s.children("a").data("target");s.data("easytabs",{}),null!=i?s.data("easytabs").ajax=e.attr("href"):i=e.attr("href"),i=i.match(/#([^\?]+)/)[1],(t=o.panelContext.find("#"+i)).length?(t.data("easytabs",{position:t.css("position"),visibility:t.css("visibility")}),t.not(o.panelActiveClass).hide(),d.panels=d.panels.add(t),s.data("easytabs").panel=t):(d.tabs=d.tabs.not(s),"console"in window&&console.warn("Warning: tab without matching panel for selector '#"+i+"' removed from set"))})},d.selectTab=function(a,t){var s=(window.location.hash.match(/^[^\?]*/)[0],a.parent().data("easytabs").panel),e=a.parent().data("easytabs").ajax;o.collapsible&&!c&&(a.hasClass(o.tabActiveClass)||a.hasClass(o.collapsedClass))?d.toggleTabCollapse(a,s,e,t):a.hasClass(o.tabActiveClass)&&s.hasClass(o.panelActiveClass)&&o.cache?c=!1:v(a,s,e,t)},d.toggleTabCollapse=function(a,t,s,e){d.panels.stop(!0,!0),p(r,"easytabs:before",[a,t,o])&&(d.tabs.filter("."+o.tabActiveClass).removeClass(o.tabActiveClass).children().removeClass(o.tabActiveClass),a.hasClass(o.collapsedClass)?(!s||o.cache&&a.parent().data("easytabs").cached||(r.trigger("easytabs:ajax:beforeSend",[a,t]),t.load(s,function(s,e,i){a.parent().data("easytabs").cached=!0,r.trigger("easytabs:ajax:complete",[a,t,s,e,i])})),a.parent().removeClass(o.collapsedClass).addClass(o.tabActiveClass).children().removeClass(o.collapsedClass).addClass(o.tabActiveClass),t.addClass(o.panelActiveClass)[n.uncollapse](n.speed,o.transitionUncollapseEasing,function(){r.trigger("easytabs:midTransition",[a,t,o]),"function"==typeof e&&e()})):(a.addClass(o.collapsedClass).parent().addClass(o.collapsedClass),t.removeClass(o.panelActiveClass)[n.collapse](n.speed,o.transitionCollapseEasing,function(){r.trigger("easytabs:midTransition",[a,t,o]),"function"==typeof e&&e()})))},d.matchTab=function(a){return d.tabs.find("[href='"+a+"'],[data-target='"+a+"']").first()},d.matchInPanel=function(a){return a&&d.validId(a)?d.panels.filter(":has("+a+")").first():[]},d.validId=function(a){return a.substr(1).match(/^[A-Za-z][A-Za-z0-9\-_:\.]*$/)},d.selectTabFromHashChange=function(){var a,t=window.location.hash.match(/^[^\?]*/)[0],s=d.matchTab(t);o.updateHash&&(s.length?(c=!0,d.selectTab(s)):(a=d.matchInPanel(t)).length?(t="#"+a.attr("id"),s=d.matchTab(t),c=!0,d.selectTab(s)):!e.hasClass(o.tabActiveClass)&&!o.cycle&&(""===t||d.matchTab(l).length||r.closest(t).length)&&(c=!0,d.selectTab(i)))},d.cycleTabs=function(t){o.cycle&&(t%=d.tabs.length,$tab=a(d.tabs[t]).children("a").first(),c=!0,d.selectTab($tab,function(){setTimeout(function(){d.cycleTabs(t+1)},o.cycle)}))},d.publicMethods={select:function(t){var s;0===(s=d.tabs.filter(t)).length?0===(s=d.tabs.find("a[href='"+t+"']")).length&&0===(s=d.tabs.find("a"+t)).length&&0===(s=d.tabs.find("[data-target='"+t+"']")).length&&0===(s=d.tabs.find("a[href$='"+t+"']")).length&&a.error("Tab '"+t+"' does not exist in tab set"):s=s.children("a").first(),d.selectTab(s)}};var p=function(t,s,e){var i=a.Event(s);return t.trigger(i,e),!1!==i.result},u=function(){r.addClass(o.containerClass),d.tabs.parent().addClass(o.tabsClass),d.tabs.addClass(o.tabClass),d.panels.addClass(o.panelClass)},f=function(){var t,s=window.location.hash.match(/^[^\?]*/)[0],n=d.matchTab(s).parent();1===n.length?(e=n,o.cycle=!1):(t=d.matchInPanel(s)).length?(s="#"+t.attr("id"),e=d.matchTab(s).parent()):0===(e=d.tabs.parent().find(o.defaultTab)).length&&a.error("The specified default tab ('"+o.defaultTab+"') could not be found in the tab set ('"+o.tabs+"') out of "+d.tabs.length+" tabs."),i=e.children("a").first(),C(n)},C=function(t){var s,n;o.collapsible&&0===t.length&&o.collapsedByDefault?e.addClass(o.collapsedClass).children().addClass(o.collapsedClass):(s=a(e.data("easytabs").panel),(n=e.data("easytabs").ajax)&&(!o.cache||!e.data("easytabs").cached)&&(r.trigger("easytabs:ajax:beforeSend",[i,s]),s.load(n,function(a,t,n){e.data("easytabs").cached=!0,r.trigger("easytabs:ajax:complete",[i,s,a,t,n])})),e.data("easytabs").panel.show().addClass(o.panelActiveClass),e.addClass(o.tabActiveClass).children().addClass(o.tabActiveClass)),r.trigger("easytabs:initialised",[i,s])},g=function(){d.tabs.children("a").on(o.bind_str,function(t){o.cycle=!1,c=!1,d.selectTab(a(this)),t.preventDefault?t.preventDefault():t.returnValue=!1})},v=function(a,t,s,e){if(d.panels.stop(!0,!0),p(r,"easytabs:before",[a,t,o])){var i,h,b,u,f=d.panels.filter(":visible"),C=t.parent(),g=window.location.hash.match(/^[^\?]*/)[0];o.animate&&(b=(i=y(t))-(h=f.length?m(f):0)),l=g,u=function(){r.trigger("easytabs:midTransition",[a,t,o]),o.animate&&"fadeIn"==o.transitionIn&&b<0&&C.animate({height:C.height()+b},n.halfSpeed).css({"min-height":""}),o.updateHash&&!c?window.history.pushState?window.history.pushState(null,null,"#"+t.attr("id")):window.location.hash="#"+t.attr("id"):c=!1,t[n.show](n.speed,o.transitionInEasing,function(){C.css({height:"","min-height":""}),r.trigger("easytabs:after",[a,t,o]),"function"==typeof e&&e()})},!s||o.cache&&a.parent().data("easytabs").cached||(r.trigger("easytabs:ajax:beforeSend",[a,t]),t.load(s,function(s,e,i){a.parent().data("easytabs").cached=!0,r.trigger("easytabs:ajax:complete",[a,t,s,e,i])})),o.animate&&"fadeOut"==o.transitionOut&&(b>0?C.animate({height:C.height()+b},n.halfSpeed):C.css({"min-height":C.height()})),d.tabs.filter("."+o.tabActiveClass).removeClass(o.tabActiveClass).children().removeClass(o.tabActiveClass),d.tabs.filter("."+o.collapsedClass).removeClass(o.collapsedClass).children().removeClass(o.collapsedClass),a.parent().addClass(o.tabActiveClass).children().addClass(o.tabActiveClass),d.panels.filter("."+o.panelActiveClass).removeClass(o.panelActiveClass),t.addClass(o.panelActiveClass),f.length?f[n.hide](n.speed,o.transitionOutEasing,u):t[n.uncollapse](n.speed,o.transitionUncollapseEasing,u)}},y=function(t){if(t.data("easytabs")&&t.data("easytabs").lastHeight)return t.data("easytabs").lastHeight;var s,e,i=t.css("display");try{s=a("<div></div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})}catch(n){s=a("<div></div>",{visibility:"hidden",overflow:"hidden"})}return e=t.wrap(s).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight(),t.unwrap(),t.css({position:t.data("easytabs").position,visibility:t.data("easytabs").visibility,display:i}),t.data("easytabs").lastHeight=e,e},m=function(a){var t=a.outerHeight();return a.data("easytabs")?a.data("easytabs").lastHeight=t:a.data("easytabs",{lastHeight:t}),t},$=function(){window.addEventListener("hashchange",d.selectTabFromHashChange,!1)},T=function(){var a;o.cycle&&(a=d.tabs.index(e),setTimeout(function(){d.cycleTabs(a+1)},o.cycle))};d.init()},a.fn.easytabs=function(t){var s=arguments;return this.each(function(){var e=a(this),i=e.data("easytabs");if(void 0===i&&(i=new a.easytabs(this,t),e.data("easytabs",i)),i.publicMethods[t])return i.publicMethods[t](Array.prototype.slice.call(s,1))})}}(jQuery);